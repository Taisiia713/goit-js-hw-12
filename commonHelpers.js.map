{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { limit, page } from '../main';\n\nexport async function fetchImages(query) {\n  query = encodeURIComponent(query);\n  const KEY = '43812511-1ad98af5969ab2e5e6977c36e';\n  const params = new URLSearchParams({\n    per_page: limit,\n    page: page,\n    key: KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const response = await axios.get(\n    `https://pixabay.com/api/?${params}&q=${query}`\n  );\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderImages(data) {\n  if (!Array.isArray(data)) {\n    console.error('Expected an array, but received:', data);\n    return;\n  }\n\n  const markup = data\n    .map(\n      el => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n    <img\n            src=\"${el.webformatURL}\"\n            alt=\"${el.tags}\"\n            width=\"360\"\n            height=\"200\"\n            class=\"gallery-img\"\n        />\n        <ul class=\"gal-list\">\n        <li class=\"gal-link\"><span class=\"gal-span\">Likes</span> ${el.likes}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Views</span> ${el.views}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Comments</span> ${el.comments}</li>\n        <li class=\"gal-link\"><span class=\"gal-span\">Downloads</span> ${el.downloads}</li>\n     </ul>\n  </a>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions.js';\n\nexport const galleryList = document.querySelector('ul.gallery');\nexport let query = '';\nconst inputQuery = document.getElementById('search-input');\nexport let page = 1;\nexport let limit = 15;\nexport const loadButton = document.getElementById('load-button');\nexport const loaderDiv = document.getElementById('loader');\n\ninputQuery.addEventListener('input', e => {\n  query = inputQuery.value.trim();\n\n  galleryList.innerHTML = '';\n  loadButton.className = 'visually-hidden';\n  loaderDiv.className = 'visually-hidden';\n});\n\nconst searchButton = document.getElementById('search-button');\n\nsearchButton.addEventListener('click', async () => {\n  galleryList.innerHTML = '';\n  loaderDiv.className = 'loader';\n  page = 1;\n  limit = 15;\n  try {\n    if (query) {\n      loadButton.className = '';\n      const response = await fetchImages(query, page, limit);\n      renderImages(response.hits);\n      loaderDiv.className = 'loader visually-hidden';\n      page += 1;\n    }\n  } catch (error) {\n    loadButton.className = 'visually-hidden';\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Виникла помилка під час завантаження зображень. Будь ласка, спробуйте пізніше.`,\n      position: 'topRight',\n    });\n  }\n});\n\nloadButton.addEventListener('click', async () => {\n  loaderDiv.className = 'loader';\n  try {\n    if (query) {\n      const response = await fetchImages(query, page, limit);\n      const totalItems = response.totalHits;\n      const currentPageItems =\n        document.querySelectorAll('.gallery-item').length;\n      if (currentPageItems >= totalItems) {\n        loadButton.className = 'visually-hidden';\n        loaderDiv.className = 'visually-hidden';\n        return iziToast.error({\n          title: 'Error',\n          message: `We're sorry, but you've reached the end of search results.`,\n          position: 'topRight',\n        });\n      }\n      console.log('Fetched posts:', response);\n      renderImages(response.hits);\n      loaderDiv.className = 'loader visually-hidden';\n      page += 1;\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Виникла помилка під час завантаження зображень. Будь ласка, спробуйте пізніше.`,\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["fetchImages","query","KEY","params","limit","page","axios","gallery","lightbox","renderImages","data","markup","el","SimpleLightbox","galleryList","inputQuery","loadButton","loaderDiv","searchButton","response","error","iziToast","totalItems"],"mappings":"owBAGO,eAAeA,EAAYC,EAAO,CACvCA,EAAQ,mBAAmBA,CAAK,EAChC,MAAMC,EAAM,qCACNC,EAAS,IAAI,gBAAgB,CACjC,SAAUC,EACV,KAAMC,EACN,IAAKH,EACL,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAID,OAHiB,MAAMI,EAAM,IAC3B,4BAA4BH,CAAM,MAAMF,CAAK,EACjD,GACkB,IAClB,CCfA,MAAMM,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAEG,SAASC,EAAaC,EAAM,CACjC,GAAI,CAAC,MAAM,QAAQA,CAAI,EAAG,CACxB,QAAQ,MAAM,mCAAoCA,CAAI,EACtD,MACD,CAED,MAAMC,EAASD,EACZ,IACCE,GAAM;AAAA,kCACsBA,EAAG,aAAa;AAAA;AAAA,mBAE/BA,EAAG,YAAY;AAAA,mBACfA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAMyCA,EAAG,KAAK;AAAA,mEACRA,EAAG,KAAK;AAAA,sEACLA,EAAG,QAAQ;AAAA,uEACVA,EAAG,SAAS;AAAA;AAAA;AAAA,MAI9E,EACA,KAAK,EAAE,EAEVL,EAAQ,mBAAmB,YAAaI,CAAM,EAE1CH,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIK,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAEL,CCtCO,MAAMC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIb,EAAQ,GACnB,MAAMc,EAAa,SAAS,eAAe,cAAc,EAClD,IAAIV,EAAO,EACPD,EAAQ,GACZ,MAAMY,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAY,SAAS,eAAe,QAAQ,EAEzDF,EAAW,iBAAiB,QAAS,GAAK,CACxCd,EAAQc,EAAW,MAAM,OAEzBD,EAAY,UAAY,GACxBE,EAAW,UAAY,kBACvBC,EAAU,UAAY,iBACxB,CAAC,EAED,MAAMC,EAAe,SAAS,eAAe,eAAe,EAE5DA,EAAa,iBAAiB,QAAS,SAAY,CACjDJ,EAAY,UAAY,GACxBG,EAAU,UAAY,SACtBZ,EAAO,EACPD,EAAQ,GACR,GAAI,CACF,GAAIH,EAAO,CACTe,EAAW,UAAY,GACvB,MAAMG,EAAW,MAAMnB,EAAYC,EAAOI,EAAMD,CAAK,EACrDK,EAAaU,EAAS,IAAI,EAC1BF,EAAU,UAAY,yBACtBZ,GAAQ,CACT,CACF,OAAQe,EAAO,CACdJ,EAAW,UAAY,kBACvB,QAAQ,IAAII,CAAK,EACjBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iFACT,SAAU,UAChB,CAAK,CACF,CACH,CAAC,EAEDL,EAAW,iBAAiB,QAAS,SAAY,CAC/CC,EAAU,UAAY,SACtB,GAAI,CACF,GAAIhB,EAAO,CACT,MAAMkB,EAAW,MAAMnB,EAAYC,EAAOI,EAAMD,CAAK,EAC/CkB,EAAaH,EAAS,UAG5B,GADE,SAAS,iBAAiB,eAAe,EAAE,QACrBG,EACtB,OAAAN,EAAW,UAAY,kBACvBC,EAAU,UAAY,kBACfI,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,6DACT,SAAU,UACpB,CAAS,EAEH,QAAQ,IAAI,iBAAkBF,CAAQ,EACtCV,EAAaU,EAAS,IAAI,EAC1BF,EAAU,UAAY,yBACtBZ,GAAQ,CACT,CACF,OAAQe,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iFACT,SAAU,UAChB,CAAK,CACF,CACH,CAAC"}